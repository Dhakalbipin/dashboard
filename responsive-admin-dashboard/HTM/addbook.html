<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <title>Admin Dashboard</title>

    <!-- Montserrat Font -->
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100;200;300;400;500;600;700;800;900&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />
    <!-- Material Icons -->
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined"
      rel="stylesheet"
    />

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    />

    <!-- Custom CSS (Your existing styles) -->
    <link rel="stylesheet" href="../css/styles.css" />
  </head>

  <body>
    <div class="grid-container">
      <!-- Header -->
      <header class="header">
        <div class="menu-icon" onclick="openSidebar()">
          <span class="material-icons-outlined">menu</span>
        </div>
        <div class="header-left">
          <span class="material-icons-outlined">search</span>
        </div>
        <div class="header-right">
          <span class="material-icons-outlined">account_circle</span>
        </div>
      </header>
      <!-- End Header -->

      <!-- Sidebar -->
      <aside id="sidebar">
        <div class="sidebar-title">
          <div class="sidebar-brand">
            <span class="material-icons-outlined">inventory</span> Book Borrow
          </div>
          <span class="material-icons-outlined" onclick="closeSidebar()"
            >close</span
          >
        </div>

        <ul class="sidebar-list">
          <li class="sidebar-list-item">
            <a href="../index.html">
              <span class="material-icons-outlined">dashboard</span> Dashboard
            </a>
          </li>
          <li class="sidebar-list-item">
            <a href="#">
              <span class="material-icons-outlined">library_books</span>Books
            </a>
          </li>
          <li class="sidebar-list-item">
            <a href="rent.html">
              <span class="material-icons-outlined">add_shopping_cart</span>
              Rent Status
            </a>
          </li>
          <li class="sidebar-list-item">
            <a href="payment.html">
              <span class="material-icons-outlined">attach_money</span>
              Payment
            </a>
          </li>
          <li class="sidebar-list-item">
            <a href="adduser.html">
              <span class="material-icons-outlined">group_add</span> Users
            </a>
          </li>
          <li class="sidebar-list-item">
            <a href="#">
              <span class="material-icons-outlined">settings</span> Settings
            </a>
          </li>
        </ul>
      </aside>
      <!-- End Sidebar -->
    
<main class="main-container">
    <div class="container mt-5">
        <div class="row justify-content-center">
            <div class="col-md-12">
                <div class="card">
                    <div class="card-body">
                        <h2 class="card-title">Book Form</h2>
                                      <form id="addBookForm">
                <div class="row mb-3">
                  <div class="col-md-6">
                    <label for="bookName" class="form-label">Book Name</label>
                    <input
                      type="text"
                      class="form-control"
                      id="bookName"
                      name="bookName"
                      required
                    />
                  </div>
                  <div class="col-md-6">
                    <label for="author" class="form-label">Author</label>
                    <input
                      type="text"
                      class="form-control"
                      id="author"
                      name="author"
                      required
                    />
                  </div>
                </div>
                <div class="row mb-3">
                  <div class="col-md-6">
                    <label for="genre" class="form-label">Genre</label>
                    <input
                      type="text"
                      class="form-control"
                      id="genre"
                      name="genre"
                      required
                    />
                  </div>
                  <div class="col-md-6">
                    <label for="stock" class="form-label">Stock</label>
                    <input
                      type="number"
                      class="form-control"
                      id="stock"
                      name="stock"
                    />
                  </div>
                </div>
                <div class="row mb-3">
                  <div class="col-md-6">
                    <label for="bookValue" class="form-label">Book Value</label>
                    <input
                      type="text"
                      class="form-control"
                      id="bookValue"
                      name="bookValue"
                      required
                    />
                  </div>
                  <div class="col-md-6">
                    <label for="vendorName" class="form-label"
                      >Vendor Name</label
                    >
                    <input
                      type="text"
                      class="form-control"
                      id="vendorName"
                      name="vendorName"
                    />
                  </div>
                </div>
                <div class="row mb-3">
                  <div class="col-md-6">
                    <label for="rating" class="form-label">Rating</label>
                    <input
                      type="number"
                      class="form-control"
                      id="rating"
                      name="rating"
                      required
                    />
                  </div>
                  <div class="col-md-6">
                    <label for="description" class="form-label"
                      >Description</label
                    >
                    <textarea
                      class="form-control"
                      id="description"
                      name="description"
                      required
                    ></textarea>
                  </div>
                </div>
                <div class="mb-3">
                  <label for="photo" class="form-label">Choose Photo</label>
                  <input
                    type="file"
                    class="form-control"
                    id="photo"
                    name="photo"
                    accept="image/*"
                  />
                </div>
                <button type="button" class="btn btn-primary" id="addBookBtn">
                  Add Book
                </button>
              </form>
                        <!-- <form id="addBookForm">
                            <button type="button" class="btn btn-primary" id="addBookBtn">Add Book</button>
                        </form> -->
                        <div class="alert alert-success mt-3 d-none" id="successAlert" role="alert">
                            Book added successfully!
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="table-responsive mt-4">
            <table class="table table-bordered table-striped">
                <thead>
                    <tr>
                        <th>S.N</th>
                        <th>BookName</th>
                        <th>Author</th>
                        <th>Genre</th>
                        <th>User ID</th>
                        <th>Description</th>
                        <th>Stock</th>
                        <th>Photo</th>
                        <th>BookValue</th>
                        <th>VendorName</th>
                        <th>Rating</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody id="bookTableBody">
                    <!-- User data will be dynamically added here -->
                </tbody>
            </table>
        </div>
    </div>
</main>

      <!-- Edit modal for the book  -->
<div class="modal fade" id="edit" tabindex="-1" aria-labelledby="editModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="editModalLabel">Add Book</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <!-- Form content for modal -->
          <form id="editBookForm">
            <input type="hidden" id="editId">
            <div class="mb-3">
              <label for="modalBookName" class="form-label">Book Name</label>
              <input type="text" class="form-control" id="editBookName" name="bookName" required>
            </div>

            <div class="mb-3">
              <label for="modalAuthor" class="form-label">Author</label>
              <input type="text" class="form-control" id="editAuthor" name="author" required>
            </div>

            <div class="mb-3">
              <label for="modalGenre" class="form-label">Genre</label>
              <input type="text" class="form-control" id="editGenre" name="genre" required>
            </div>

            <div class="mb-3">
              <label for="modalUserId" class="form-label">User ID</label>
              <input type="text" class="form-control" id="editUserId" name="userId">
            </div>

            <div class="mb-3">
              <label for="modalDescription" class="form-label">Description</label>
              <textarea class="form-control" id="editDescription" name="description" required></textarea>
            </div>

            <div class="mb-3">
              <label for="modalStock" class="form-label">Stock</label>
              <input type="number" class="form-control" id="editStock" name="stock">
            </div>

            <div class="mb-3">
              <label for="modalBookValue" class="form-label">Book Value</label>
              <input type="text" class="form-control" id="editBookValue" name="bookValue" required>
            </div>

            <div class="mb-3">
              <label for="modalVendorName" class="form-label">Vendor Name</label>
              <input type="text" class="form-control" id="editVendorName" name="vendorName">
            </div>

            <div class="mb-3">
              <label for="modalRating" class="form-label">Rating</label>
              <input type="number" class="form-control" id="editRating" name="rating" required>
              
            </div>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            <button type="button" class="btn btn-primary" id="saveBookBtn">Save Book</button>
          </form>
        </div>
      </div>
    </div>
  </div>
  <!-- book delete model -->
  <div class="modal fade" id="delete" tabindex="-1" role="dialog" aria-labelledby="deleteModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="deleteModalLongTitle">Delete Confirmation</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p>Are you sure you want to delete this item?</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">No</button>
        <button type="button" class="btn btn-danger" id="deleteYesBtn">Yes</button>
      </div>
    </div>
  </div>
</div>
        </main>
        <!-- End Main -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/apexcharts/3.35.3/apexcharts.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <!-- Custom JS -->
    <script src="/responsive-admin-dashboard/JS/book.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const addBookForm = document.getElementById("addBookForm");
        const successAlert = document.getElementById("successAlert");

        document
          .getElementById("addBookBtn")
          .addEventListener("click", function () {
            const formData = new FormData(addBookForm);

            fetch("http://localhost:3000/api/book", {
              method: "POST",
              body: formData,
            })
              .then((response) => response.json())
              .then((data) => {
                console.log("Book added successfully:", data);
                // Show success alert
                successAlert.classList.remove("d-none");
                // Clear the form
                addBookForm.reset();
              })
              .catch((error) => {
                console.error("Error adding book:", error);
              });
          });
      });
    </script>
  </body>
</html>

